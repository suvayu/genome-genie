<%!
    from genomegenie.batch.filters import bam2pon, sample_name, path_transform
%>

$GATKHOME/gatk \
% if javaopts is UNDEFINED:
    --java-options '-Xmx64g' \
% else:
    --java-options ${javaopts} \
% endif
    Mutect2 \
    -R ${ref_fasta} \
    -I ${normal_bam} -normal ${sample_name(normal_bam)} \
    -O ${path_transform(normal_bam, output) | bam2pon} \
    --germline-resource ${db} \
% if exome_bed is not UNDEFINED:
    -L ${exome_bed} \
% endif
% if nprocs is not UNDEFINED:
    --native-pair-hmm-threads ${f'{nprocs}'}
% endif
